{"version":3,"file":"static/js/539.46234350.chunk.js","mappings":"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","sources":["webpack://slim-mom-fullstack/./src/components/LoginForm/LoginForm.module.css?4ac5","components/LoginForm/LoginForm.jsx","webpack://slim-mom-fullstack/./src/pages/LoginPage/LoginPage.module.css?f8e0","pages/LoginPage/LoginPage.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"formTitle\":\"LoginForm_formTitle__xGeGl\",\"inputBox\":\"LoginForm_inputBox__K8-9I\",\"buttonContainer\":\"LoginForm_buttonContainer__MhxpF\",\"button\":\"LoginForm_button__LodJg\",\"active\":\"LoginForm_active__PKBif\"};","import React, { useState } from 'react';\nimport css from './LoginForm.module.css';\nimport { useNavigate, useLocation } from 'react-router-dom';\n\nimport axios from 'axios';\nimport { toast, ToastContainer } from 'react-toastify';\nimport { RotatingLines } from 'react-loader-spinner';\nimport 'react-toastify/dist/ReactToastify.css';\n\naxios.defaults.baseURL = 'https://slim-mom-fullstack.onrender.com';\n\nexport const LoginForm = ({ onLogin }) => {\n  // State to manage form inputs\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const isLoginPage = location.pathname === '/login';\n\n  // Handle form submission\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      const response = await axios.post('/api/users/login', {\n        email,\n        password,\n      });\n\n      // Extract the token from the response\n      console.log(response.data);\n\n      // const { token } = response.data;\n      const { token, name, dailyConsumedProducts } = response.data;\n\n      if (token) {\n        // console.log('Token received:', token);\n        localStorage.setItem('token', token);\n\n        localStorage.setItem('userName', name); // Store user name\n        localStorage.setItem(\n          'dailyConsumedProducts',\n          JSON.stringify(dailyConsumedProducts)\n        ); // Store other user data as needed\n\n        axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n\n        toast.success('Login successful!');\n        onLogin();\n        navigate('/calculator'); //Redirect to the calculator page\n      } else {\n        toast.error('Login failed. Please try again.');\n      }\n    } catch (error) {\n      if (error.response && error.response.data.message) {\n        toast.error(error.response.data.message);\n      } else {\n        toast.error(\n          'Login failed. Please check your credentials and try again.'\n        );\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div>\n      <div className={css.formTitle}>\n        <h4>LOG IN</h4>\n\n        <form onSubmit={handleSubmit}>\n          <div className={css.inputBox}>\n            <input\n              type=\"email\"\n              name=\"email\"\n              id=\"email\"\n              placeholder=\" \"\n              value={email}\n              onChange={e => setEmail(e.target.value)}\n              required\n            />\n            <label htmlFor=\"email\">Email*</label>\n          </div>\n          <div className={css.inputBox}>\n            <input\n              type=\"password\"\n              name=\"password\"\n              id=\"password\"\n              placeholder=\" \"\n              value={password}\n              onChange={e => setPassword(e.target.value)}\n              required\n            />\n            <label htmlFor=\"password\">Password*</label>\n          </div>\n\n          <div className={css.buttonContainer}>\n            <button\n              className={`${css.button} ${isLoginPage ? css.active : ''}`}\n              type=\"submit\"\n              disabled={isLoading}\n            >\n              {isLoading ? (\n                <RotatingLines\n                  visible={true}\n                  height=\"24\"\n                  width=\"24\"\n                  color=\"white\"\n                  strokeWidth=\"5\"\n                  animationDuration=\"0.75\"\n                  ariaLabel=\"rotating-lines-loading\"\n                />\n              ) : (\n                'Log in'\n              )}\n            </button>\n\n            <button\n              className={css.button}\n              type=\"button\"\n              onClick={() => navigate('/register')}\n            >\n              Register\n            </button>\n          </div>\n        </form>\n\n        <ToastContainer position=\"top-right\" autoClose={3000} />\n      </div>\n    </div>\n  );\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"backgroundContainer\":\"LoginPage_backgroundContainer__8he70\"};","import React from 'react';\nimport { LoginForm } from '../../components/LoginForm/LoginForm';\nimport css from './LoginPage.module.css';\n\nconst LoginPage = ({ onLogin }) => {\n  return (\n    <div className={css.backgroundContainer}>\n      <LoginForm onLogin={onLogin} />\n    </div>\n  );\n};\n\nexport default LoginPage;\n"],"names":["axios","LoginForm","_ref","onLogin","_useState","useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","isLoading","setIsLoading","navigate","useNavigate","isLoginPage","useLocation","pathname","handleSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","_callee","e","response","_response$data","token","name","dailyConsumedProducts","_context","prev","next","preventDefault","sent","console","log","data","localStorage","setItem","JSON","stringify","concat","toast","t0","message","finish","stop","_x","apply","arguments","_jsx","children","_jsxs","className","css","onSubmit","type","id","placeholder","value","onChange","target","required","htmlFor","disabled","RotatingLines","visible","height","width","color","strokeWidth","animationDuration","ariaLabel","onClick","ToastContainer","position","autoClose"],"sourceRoot":""}